%Enable optional arguments, for the experienceitems below
\newcommand{\optarg}[2][]{%
  \ifthenelse{\isempty{#1}}%
    {}% if #1 is empty
    {#2}% if #1 is not empty
}
\newcommand{\collate}[2][]{%
  \ifthenelse{\isempty{#1}}{#2}{#1}}

% General split util for below
\def\bothwords#1 #2\relax{#1 #2}
\def\firstword#1 #2\relax{#1}
\def\secondword#1 #2\relax{#2}

%Past/present tense switcher
%Use this by adding either
%\let\pt\pasttense or \let\pt\presenttense
%at the beginning of the file
%And then using \pt[present tense]{past tense},
%or just \pt{past tense} if no present tense text is necessary
%e.g. "Buil\pt[d]{t} infrastructre" or "Frob\pt{bed} widget"
%Switching tenses is as easy as changing the \let at the top
\newcommand{\pasttense}[2][]{{#2}}
\newcommand{\presenttense}[2][]{{#1}}

\newcommand{\anonyes}[3][ish]{#3}
\newcommand{\anonish}[3][ish]{\ifthenelse{\isempty{#1}}{#3}{#2}}
\newcommand{\anonno}[3][ish]{#2}

\newcommand{\monthyes}[1]{\expandafter\bothwords#1\relax}
\newcommand{\monthno}[1]{\expandafter\secondword#1\relax}

%Main section - Qualifications, Education, Experience.
%Should contain one or more subsections
\newenvironment{rsection}[1]{%
  \noindent
  {\Large \textbf{#1}}\\
  \rule[8pt]{\textwidth}{0.5pt}
  \vskip -8pt
}{
}

%Subsection within main section - Skills, Projects, etc
%Encloses several \items in an itemize list
\newenvironment{rsubsection}[1]{%
  \vskip 6pt
  \noindent
  {\large \textbf{#1}}
  \raggedright{}
}{
  \vspace{0.5em}
}

\newenvironment{rsubitems}[1]{%
  \vspace{0.5em}
  \begin{rsubsection}{#1}
  \vspace{0.1em}
  \begin{itemize}
}{
  \end{itemize}
  \end{rsubsection}
}

%Subsection within main section - Skills, Projects, etc
%Encloses several \items in an itemize list
\newenvironment{rcontent}[1]{%
  \vskip 4pt
  \noindent
  \large{#1}
  \normalsize
}{
}


\newcommand{\rexperiencehead}[5]{%
  \large \textbf{#1}%
  \hfill
  \normalsize
  \optarg[#4]{\month{#4}}%
  \ifthenelse{\equal{\month{#4}}{\month{#5}}}
    {}
    {\optarg[#5]{\ -- \month{#5}}}% chktex 8

  \noindent
  \optarg[#2]{#2}%
  \normalsize
  \hfill
  \optarg[#3]{#3}%
}

%An item under "Experience" - subclass of subsection.
%Includes and formats company and optional location, start, and end date.
\newenvironment{rexperienceitem}[5]{%
  \rexperiencehead{#1}{#2}{#3}{#4}{#5}
  \begin{itemize}
  \setlength\itemsep{0.25em}
  \raggedright{}
  \vspace{0.5em}
}{
  \end{itemize}
  \vspace{0.5em}
}

\newenvironment{rexperience}[5]{%
  \rexperiencehead{#1}{#2}{#3}{#4}{#5}
  \vspace{0.5em}
}{
  \vspace{0.5em}\par
}
